---
import Layout from "../../layouts/Layout.astro";
import SectionHeading from "../../components/common/SectionHeading.astro";
import SectionNav from "../../components/common/SectionNav.astro";
import EventScheduleCard from "../../components/common/EventScheduleCard.astro";
import SimplePriceCard from "../../components/common/SimplePriceCard.astro";
import eventsData from "../../data/events.yaml";
import { marked } from 'marked';

export async function getStaticPaths() {
  return eventsData.events.map((event) => ({
    params: { id: event.id },
    props: { event }
  }));
}

const { event } = Astro.props;
const { name, eventDate, paymentDeadline, senseiInfo, schedule, prices } = event;
const senseiInfo0 = marked.parse(senseiInfo);
---

<Layout
  title="{name} - {eventDate} - Aikido Dojo Gamlestaden"
  description="Weekend seminar with {name}. {eventDate} in Göteborg." 
>
  <main class="mx-auto max-w-5xl">
    <h1 class="-mt-4 text-center font-serif text-4xl font-bold">
      {name}<br />{eventDate}
    </h1>
    
    <div class="px-4 pb-5">
      <h2 class="px-8 -mt-4 text-center font-serif text-3xl font-bold text-primary-900">
        We welcome all aikidoka, regardless of rank or style, to a seminar with {name}
      </h2>

      <div class="mt-8 flow-root">
        {event.image && (
          <img 
            src={event.image} 
            class="w-[250px] p-2 shadow-lg md:float-right md:ml-6 md:mb-4" 
            alt="Sensei {name}"
          />
        )}
        
        <div class="space-y-5 text-gray-800" set:html={senseiInfo0}>
        </div>
      </div>

      <div class="mt-5 space-y-5 text-gray-800">
        
        <p class="border-l border-r border-primary bg-primary text-primary-content p-2">
          We are looking forward to seeing dear friends and meeting new ones for dynamic training 
          and social opportunity to enjoy what we all share — aikido.
        </p>
        
        <p>
          Weapons: Bokken and jo. If you need to borrow weapons, please let us know by indicating 
          that in the registration form.
        </p>
        
        <p>
          Please find the details regarding location, schedule, accommodation, prices and contact 
          information below.
        </p>
      </div>

      <div class="mt-5 space-y-4">
        <p class="text-lg text-primary-900">
          <strong class="font-bold">When?</strong> {eventDate}
        </p>
        
        <p class="text-lg text-primary-900">
          <strong class="font-bold">Where?</strong> Frölunda Judoklubb, Klubbvägen 8, Västra Frölunda
        </p>
        
        <p class="text-center">
          <a href="https://adg-aikido.se/{event.id}">
            <button class="rounded border border-primary bg-primary px-4 py-2 font-bold text-primary-content transition hover:bg-primary/90">
              Register here
            </button>
          </a>
        </p>
        
        <p class="text-lg">
          Contact information: 
          <a href="mailto:info@adg-aikido.se" class="font-medium text-gray-400 underline decoration-primary-500underline-offset-1">
            info@adg-aikido.se
          </a> or 
          <a href="tel:+46768800674" class="font-medium text-gray-400 underline decoration-primary-500underline-offset-1">
            +46&nbsp;768&nbsp;800&nbsp;674&nbsp;(Vlad)
          </a> or 
          <a href="tel:+46739659090" class="font-medium text-gray-400 underline decoration-primary-500underline-offset-1">
            +46&nbsp;739&nbsp;659&nbsp;090&nbsp;(Alula)
          </a>
        </p>
      </div>

      <SectionNav 
        class="mt-8 print:hidden"
        items={[
          { href: '#schedule', label: 'Schedule' },
          { href: '#prices', label: 'Prices' },
          { href: '#directions', label: 'Directions' }
        ]}
      />

      <section id="schedule" class="scroll-mt-20">
        <SectionHeading level="h3" class="mt-8 text-primary-900">Schedule</SectionHeading>
        
        <div class="-mx-3 mt-4 flex flex-wrap justify-center">
          <div class="my-2 w-full px-3 sm:w-1/2">
            <EventScheduleCard
              day="Saturday"
              items={schedule.saturday}
            />
          </div>
          
          <div class="my-2 w-full px-3 sm:w-1/2">
            <EventScheduleCard
              day="Sunday"
              items={schedule.sunday}
            />
          </div>
        </div>
      </section>

      <section id="prices" class="scroll-mt-20">
        <SectionHeading level="h3" class="mt-8 text-primary-900">Prices</SectionHeading>
        
        <div class="-mx-2 mt-4 flex flex-wrap justify-center">
          {prices.map((priceCard) => (
            <div class="my-2 w-full px-2 sm:w-1/2 md:w-1/4">
              <SimplePriceCard
                title={priceCard.title}
                price={priceCard.price}
                note={priceCard.note}
              />
            </div>
          ))}
        </div>
      </section>

      <p class="mt-6">
        <strong class="font-bold">Note!</strong> Young people under 16 years need to be accompanied by an adult!
      </p>

      <h4 class="mt-6 font-serif text-xl font-bold text-primary-900">Payment information</h4>
      
      <ul class="ml-8 mt-4 list-none space-y-2">
        <li>Postgiro: <strong class="font-bold">462 37 05-3</strong></li>
        <li>Swish: <strong class="font-bold">123-16 17 109</strong></li>
        <li>Bank account: <strong class="font-bold">SE83 9500 0099 6042 4623 7053 (NDEASESS)</strong></li>
        <li>
          We would like to keep cash payments to a minimum, please pay to one of the options of 
          the above if possible.
        </li>
        <li class="underline">
          The fees should be paid by {paymentDeadline}. If you register after that date, make the 
          payment together with the registration.
        </li>
      </ul>

      <section id="directions" class="scroll-mt-20 print:hidden">
        <SectionHeading level="h3" class="mt-8 text-primary-900">Directions</SectionHeading>
        
        <div class="ml-8 mt-4 space-y-4">
          <p>Frölunda Judoklubb, Klubbvägen 8, Västra Frölunda</p>
          
          <p>Trams 1, 7, 8 to Frölunda torg, buses 92, 93 from Frölunda torg to bus stop "Hults bro".</p>
          
          <iframe 
            class="w-full max-w-[400px] aspect-4/3 rounded-md p-2 shadow mx-auto" 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2135.3611126682704!2d11.917655516102908!3d57.64234815215293!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x464ff2bc1b64c60d%3A0x44779303d26cf081!2sFr%C3%B6lunda%20Judoklubb!5e0!3m2!1sen!2sse!4v1577389677109!5m2!1sen!2sse" 
            allowfullscreen
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade" 
            title="Location of Frölunda Judoklubb"
          ></iframe>
        </div>
      </section>
    </div>
  </main>
</Layout>
