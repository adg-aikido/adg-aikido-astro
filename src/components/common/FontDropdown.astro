---
export interface Props {
  fonts: Array<{ family: string; name: string; weights: number[] }>;
  type: 'heading' | 'body';
  currentFont: string;
  label: string;
}

const { fonts, type, currentFont, label } = Astro.props;
const fontClass = type === 'heading' ? 'font-serif' : 'font-sans';
const fontSize = type === 'heading' ? 'text-lg font-bold' : 'text-base';
const fontType = type === 'heading' ? 'serif' : 'sans-serif';
const methodName = type === 'heading' ? 'setHeadingFont' : 'setBodyFont';
const storageKey = type === 'heading' ? 'headingFont' : 'bodyFont';
---

<div class="dropdown dropdown-end">
  <label tabindex="0" class="btn btn-ghost btn-sm " aria-label={label}>
    <span class={`${fontClass} ${fontSize}`}>Aa</span>
  </label>
  <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-300 rounded-box w-52 z-50">
    {fonts.map(font => (
      <li>
        <button
          @click={`${methodName}('${font.family}')`}
          :class={`${storageKey} === '${font.family}' ? 'active bg-primary text-primary-content font-bold' : ''`}
          style={`font-family: '${font.family}', ${fontType};`}
        >
          {font.name}
        </button>
      </li>
    ))}
  </ul>
</div>
